# Ruby box from docker
box: ruby:3.0.0

services:
  - postgres

build:
  steps:
    - script:
      name: Ruby Version + Gem Information
      code: |
        echo "Ruby Version: $(ruby --version)"
        echo "Ruby Location: $(which ruby)"
        echo "Ruby Gems:"
        gem list

    - bundle-install

    - script:
      name: RuboCop Static Code Analyzer - .rb (ruby) files
      code: bin/rubocop

    - script:
      name: RuboCop (Ruumba) Static Code Analyzer - .erb (view) files
      code: bin/ruumba

    - script:
      name: TraceRoute (detect redundant/inaccessible routes and controller actions)
      code: bin/traceroute

    - script:
      name: Brakeman Security Check
      code: bin/brakeman
